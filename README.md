# ğŸ¤– å°‚é–€å®¶AI ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€å°‚é–€åˆ†é‡ã«ç‰¹åŒ–ã—ãŸAIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã¨å¯¾è©±ã§ãã‚‹Streamlitãƒ™ãƒ¼ã‚¹ã®Webã‚¢ãƒ—ãƒªã§ã™ã€‚LangChainã¨OpenAIã®GPT-4o-miniãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã€é¸æŠã—ãŸå°‚é–€å®¶ã¨ã—ã¦å›ç­”ã—ã¾ã™ã€‚

## ğŸ“‹ æ©Ÿèƒ½

- **å°‚é–€å®¶é¸æŠæ©Ÿèƒ½**: ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã§ä»¥ä¸‹ã®å°‚é–€å®¶ã‹ã‚‰é¸æŠå¯èƒ½
  - ğŸ‘¨â€âš•ï¸ ãƒ˜ãƒ«ã‚¹ã‚±ã‚¢ã®å°‚é–€å®¶ï¼ˆåŒ»ç™‚ã€å¥åº·ã€æ „é¤Šã€é‹å‹•ãªã©ï¼‰
  - âš–ï¸ æ—¥æœ¬ã®æ³•å¾‹ã®å°‚é–€å®¶ï¼ˆæ—¥æœ¬ã®æ³•å¾‹ã€æ³•è¦åˆ¶ã€æ³•çš„æ‰‹ç¶šããªã©ï¼‰
- **å¯¾è©±å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹**: ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã§è³ªå•ã‚’å…¥åŠ›ã—ã€AIã‹ã‚‰ã®å›ç­”ã‚’è¡¨ç¤º
- **ç’°å¢ƒå¤‰æ•°ç®¡ç†**: `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã§OpenAI APIã‚­ãƒ¼ã‚’å®‰å…¨ã«ç®¡ç†

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **Streamlit**: Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **LangChain**: LLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **OpenAI GPT-4o-mini**: è¨€èªãƒ¢ãƒ‡ãƒ«
- **Python 3.11**: ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª

## ğŸ“¦ å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

```
streamlit
langchain-openai
python-dotenv
```

## ğŸš€ ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®å®Ÿè¡Œæ–¹æ³•

### 1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone https://github.com/ShoataKuma/streamlit-llm-apps02-deploy.git
cd streamlit-llm-apps02-deploy
```

### 2. ä»®æƒ³ç’°å¢ƒã®ä½œæˆã¨æœ‰åŠ¹åŒ–

```bash
python -m venv env
env\Scripts\activate  # Windowsã®å ´åˆ
# source env/bin/activate  # macOS/Linuxã®å ´åˆ
```

### 3. å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pip install -r requirements.txt
```

### 4. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€OpenAI APIã‚­ãƒ¼ã‚’è¨­å®šã—ã¾ã™ï¼š

```
OPENAI_API_KEY=your_openai_api_key_here
```

### 5. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•

```bash
streamlit run app.py
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:8501` ãŒè‡ªå‹•çš„ã«é–‹ãã¾ã™ã€‚

## ğŸŒ Streamlit Community Cloudã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

### 1. GitHubãƒªãƒã‚¸ãƒˆãƒªã®æº–å‚™

- ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’GitHubã«ãƒ—ãƒƒã‚·ãƒ¥
- `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã¯`.gitignore`ã«è¿½åŠ ã—ã¦**ãƒ—ãƒƒã‚·ãƒ¥ã—ãªã„ã“ã¨**

### 2. Streamlit Community Cloudã§ã®ãƒ‡ãƒ—ãƒ­ã‚¤

1. [Streamlit Community Cloud](https://streamlit.io/cloud)ã«ã‚¢ã‚¯ã‚»ã‚¹
2. GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³
3. ã€ŒNew appã€ã‚’ã‚¯ãƒªãƒƒã‚¯
4. ãƒªãƒã‚¸ãƒˆãƒªã€ãƒ–ãƒ©ãƒ³ãƒã€ãƒ¡ã‚¤ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ï¼ˆ`app.py`ï¼‰ã‚’é¸æŠ
5. ã€ŒAdvanced settingsã€ã‚’ã‚¯ãƒªãƒƒã‚¯
6. **Python version**ã‚’`3.11`ã«è¨­å®š
7. **Secrets**ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ä»¥ä¸‹ã‚’è¿½åŠ ï¼š
   ```
   OPENAI_API_KEY = "your_openai_api_key_here"
   ```
8. ã€ŒDeploy!ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

### æ³¨æ„äº‹é …

- `.python-version`ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒªãƒã‚¸ãƒˆãƒªã«å«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€Python 3.11ãŒè‡ªå‹•çš„ã«ä½¿ç”¨ã•ã‚Œã¾ã™
- OpenAI APIã‚­ãƒ¼ã¯å¿…ãš**Secrets**ã§ç®¡ç†ã—ã€`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’GitHubã«ãƒ—ãƒƒã‚·ãƒ¥ã—ãªã„ã§ãã ã•ã„

## ğŸ“– ä½¿ã„æ–¹

1. **å°‚é–€å®¶ã‚’é¸æŠ**: ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã‹ã‚‰ç›¸è«‡ã—ãŸã„å°‚é–€å®¶ã‚’é¸æŠ
2. **è³ªå•ã‚’å…¥åŠ›**: ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢ã®ãƒ†ã‚­ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ã«è³ªå•ã‚’å…¥åŠ›
3. **é€ä¿¡**: ã€Œé€ä¿¡ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
4. **å›ç­”ã‚’ç¢ºèª**: AIã‹ã‚‰ã®å›ç­”ãŒç”»é¢ã«è¡¨ç¤ºã•ã‚Œã¾ã™

## ğŸ”§ ä¸»è¦ãªã‚³ãƒ¼ãƒ‰æ§‹é€ 

### `get_llm_response`é–¢æ•°

```python
def get_llm_response(user_input: str, expert_type: str) -> str:
    """
    å…¥åŠ›ãƒ†ã‚­ã‚¹ãƒˆã¨å°‚é–€å®¶ã‚¿ã‚¤ãƒ—ã‚’å—ã‘å–ã‚Šã€LLMã‹ã‚‰ã®å›ç­”ã‚’è¿”ã™é–¢æ•°
    """
    llm = ChatOpenAI(model_name="gpt-4o-mini", temperature=0)
    
    # å°‚é–€å®¶ã‚¿ã‚¤ãƒ—ã«å¿œã˜ã¦ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¨­å®š
    if expert_type == "healthcare":
        system_content = "ã‚ãªãŸã¯ãƒ˜ãƒ«ã‚¹ã‚±ã‚¢ã®å°‚é–€å®¶ã§ã™..."
    elif expert_type == "law":
        system_content = "ã‚ãªãŸã¯æ—¥æœ¬ã®æ³•å¾‹ã®å°‚é–€å®¶ã§ã™..."
    
    messages = [
        SystemMessage(content=system_content),
        HumanMessage(content=user_input),
    ]
    
    result = llm(messages)
    return result.content
```

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ¤ è²¢çŒ®

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ­“è¿ã—ã¾ã™ã€‚å¤§ããªå¤‰æ›´ã®å ´åˆã¯ã€ã¾ãšissueã‚’é–‹ã„ã¦å¤‰æ›´å†…å®¹ã‚’è­°è«–ã—ã¦ãã ã•ã„ã€‚

## ğŸ“§ ãŠå•ã„åˆã‚ã›

è³ªå•ã‚„ææ¡ˆãŒã‚ã‚‹å ´åˆã¯ã€GitHubã®issueã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚